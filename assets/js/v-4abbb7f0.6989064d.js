"use strict";(self.webpackChunk_2256184693_github_io=self.webpackChunk_2256184693_github_io||[]).push([[560],{1613:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-4abbb7f0",path:"/pages/work/1.%E8%AF%B7%E6%B1%82%E5%8F%96%E6%B6%88.axios-cancel.html",title:"å®é™…ä¸šåŠ¡ä¸­å¦‚ä½•å–æ¶ˆè¯·æ±‚",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"å¯èƒ½çš„ä¸šåŠ¡åœºæ™¯",slug:"å¯èƒ½çš„ä¸šåŠ¡åœºæ™¯",children:[]},{level:2,title:"æœåŠ¡ç«¯é€šä¿¡æ–¹å¼",slug:"æœåŠ¡ç«¯é€šä¿¡æ–¹å¼",children:[{level:3,title:"Axiosä»‹ç»",slug:"axiosä»‹ç»",children:[]},{level:3,title:"å¤æ‚å¤„ç†",slug:"å¤æ‚å¤„ç†",children:[]}]},{level:2,title:"å¦‚ä½•å–æ¶ˆè¯·æ±‚",slug:"å¦‚ä½•å–æ¶ˆè¯·æ±‚",children:[]},{level:2,title:"ä¸šåŠ¡åŒ–å°è£…",slug:"ä¸šåŠ¡åŒ–å°è£…",children:[{level:3,title:"æµç¨‹æ¢³ç†",slug:"æµç¨‹æ¢³ç†",children:[]},{level:3,title:"è¯·æ±‚æ ‡è¯†",slug:"è¯·æ±‚æ ‡è¯†",children:[]},{level:3,title:"è¯·æ±‚é˜Ÿåˆ—",slug:"è¯·æ±‚é˜Ÿåˆ—",children:[]},{level:3,title:"åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­",slug:"åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­",children:[]},{level:3,title:"å®é™…ä½¿ç”¨ä»£ç ",slug:"å®é™…ä½¿ç”¨ä»£ç ",children:[]}]},{level:2,title:"æŠ€èƒ½ç‚¹æŒæ¡",slug:"æŠ€èƒ½ç‚¹æŒæ¡",children:[]}],filePathRelative:"pages/work/1.è¯·æ±‚å–æ¶ˆ.axios-cancel.md"}},849:(n,s,a)=>{a.r(s),a.d(s,{default:()=>G});var p=a(6252);const t=(0,p.uE)('<h1 id="å®é™…ä¸šåŠ¡ä¸­å¦‚ä½•å–æ¶ˆè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¸šåŠ¡ä¸­å¦‚ä½•å–æ¶ˆè¯·æ±‚" aria-hidden="true">#</a> å®é™…ä¸šåŠ¡ä¸­å¦‚ä½•å–æ¶ˆè¯·æ±‚</h1><p>ğŸš€ ä¸šåŠ¡é¡¹ç›®ä¸­ä¼šé¢‘ç¹çš„å‘èµ·è¯·æ±‚åŒæœåŠ¡ç«¯é€šä¿¡ï¼Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿä¸€äº›é‡å¤è¯·æ±‚ã€‚å¦‚æœä¸å¯¹è¿™äº›é‡å¤è¯·æ±‚åˆç†çš„å¤„ç†ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿå‡ºç°å„ç§é—®é¢˜ã€‚</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æœ‰æ•ˆå¤„ç†æ¥é¿å…æ„å¤–é”™è¯¯å‡ºç°å‘¢ï¼Ÿ</p><h2 id="å¯èƒ½çš„ä¸šåŠ¡åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#å¯èƒ½çš„ä¸šåŠ¡åœºæ™¯" aria-hidden="true">#</a> å¯èƒ½çš„ä¸šåŠ¡åœºæ™¯</h2><ul><li><p>ä¸€ä¸ªå…·æœ‰å¤šé¡¹æ¡ä»¶çš„Formè¡¨å•ï¼Œæäº¤è¯·æ±‚åè¿”å›æ•°æ®åˆ—è¡¨ï¼Œå¹¶æ¸²æŸ“åˆ°é¡µé¢çš„Tableä¸­ï¼Œè¿™ä¸ªåœºæ™¯ä¼šå‡ºç°åœ¨å…¸å‹çš„Adminç®¡ç†é¡¹ç›®ä¸­ã€‚å‡è®¾ç”¨æˆ·æäº¤ç¬¬ä¸€æ¬¡æŸ¥è¯¢åæ›´æ”¹æŸ¥è¯¢æ¡ä»¶ï¼Œå†æ¬¡æäº¤æŸ¥è¯¢ï¼Œè¿™æ—¶å°±äº§ç”Ÿäº†ä¸¤æ¬¡è¯·æ±‚ã€‚å¦‚æœæ•°æ®æ¥å£å“åº”æ—¶é—´ä¸ç¨³å®šï¼Œç¬¬äºŒæ¬¡è¯·æ±‚å…ˆäºç¬¬ä¸€æ¬¡è¯·æ±‚è¿”å›ï¼Œå‰ç«¯å¦‚æœä¸å¤„ç†çš„è¯å¾ˆå¯èƒ½ä¼šå°†ç¬¬ä¸€æ¬¡è¯·æ±‚çš„ç»“æœå±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œäº§ç”Ÿå¼‚å¸¸ã€‚</p></li><li><p>ä¸€ä¸ªCç«¯æäº¤é¡µé¢ï¼Œç”¨æˆ·è¿ç»­å¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’®æäº¤ï¼Œå¯¼è‡´æœåŠ¡ç«¯å¤šæ¬¡å“åº”ã€‚</p></li></ul><h2 id="æœåŠ¡ç«¯é€šä¿¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯é€šä¿¡æ–¹å¼" aria-hidden="true">#</a> æœåŠ¡ç«¯é€šä¿¡æ–¹å¼</h2><h3 id="axiosä»‹ç»" tabindex="-1"><a class="header-anchor" href="#axiosä»‹ç»" aria-hidden="true">#</a> Axiosä»‹ç»</h3>',7),e={href:"https://axios-http.com/",target:"_blank",rel:"noopener noreferrer"},o=(0,p.Uk)("Axios"),c=(0,p.Uk)(" æ˜¯ä¸€ä¸ªåŸºäº Promise çš„ HTTP å®¢æˆ·ç«¯ï¼Œè€Œä¸”åŒæ—¶æ”¯æŒæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒï¼Œåœ¨Webåº”ç”¨ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ Axios åˆ†åˆ«å‘èµ· GET å’Œ POST è¯·æ±‚ï¼š"),l=(0,p._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,p._)("pre",{class:"language-javascript"},[(0,p._)("code",null,[(0,p.Uk)("axios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"get"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user?id=123'"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"then"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"response"),(0,p.Uk)(),(0,p._)("span",{class:"token operator"},"=>"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// å¤„ç†å“åº”ç»“æœ"),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"catch"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"error"),(0,p.Uk)(),(0,p._)("span",{class:"token operator"},"=>"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// å¤„ç†å¼‚å¸¸æƒ…å†µ"),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n")])]),(0,p._)("div",{class:"line-numbers"},[(0,p._)("span",{class:"line-number"},"1"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"2"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"3"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"4"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"5"),(0,p._)("br")])],-1),u=(0,p._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,p._)("pre",{class:"language-javascript"},[(0,p._)("code",null,[(0,p.Uk)("axios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"post"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token literal-property property"},"id"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(),(0,p._)("span",{class:"token number"},"123"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"then"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"response"),(0,p.Uk)(),(0,p._)("span",{class:"token operator"},"=>"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// å¤„ç†å“åº”ç»“æœ"),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"catch"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"error"),(0,p.Uk)(),(0,p._)("span",{class:"token operator"},"=>"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// å¤„ç†å¼‚å¸¸æƒ…å†µ"),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n")])]),(0,p._)("div",{class:"line-numbers"},[(0,p._)("span",{class:"line-number"},"1"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"2"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"3"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"4"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"5"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"6"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"7"),(0,p._)("br")])],-1),r=(0,p.uE)('<h3 id="å¤æ‚å¤„ç†" tabindex="-1"><a class="header-anchor" href="#å¤æ‚å¤„ç†" aria-hidden="true">#</a> å¤æ‚å¤„ç†</h3><p>åœ¨å®é™…çš„ä¸šåŠ¡é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨Axiosï¼Œè€Œä¼šå…ˆå¯¹Axiosä¸šåŠ¡åŒ–å°è£…ï¼Œå¢åŠ ä¸€äº›ä¸ªæ€§åŒ–çš„ç»Ÿä¸€å¤„ç†é€»è¾‘ï¼Œä½¿ç¨‹åºå‘˜åœ¨å¼€å‘è¿‡ä¸­å°±æ— éœ€è€ƒè™‘å¾ˆå¤šå…¬å…±é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>ç»Ÿä¸€çš„æœåŠ¡ç«¯HOST</p></li><li><p>è¶…æ—¶é™åˆ¶</p></li><li><p>Cookieä¸ŠæŠ¥</p></li><li><p>ç™»å½•Token</p></li><li><p>æœªç™»å½•å¤„ç†</p></li><li><p>å¼‚å¸¸ä¿¡æ¯å±•ç¤º</p></li><li><p>Â·Â·Â·</p></li></ul>',3),i=(0,p.Uk)("è¿™å°±å¿…é¡»æåˆ° Axios ä¸­çš„ "),k={href:"https://axios-http.com/docs/interceptors",target:"_blank",rel:"noopener noreferrer"},b=(0,p._)("strong",null,"æ‹¦æˆªå™¨",-1),_=(0,p.Uk)(" äº†ã€‚æ‹¦æˆªå™¨æœ‰ "),m=(0,p._)("strong",null,"è¯·æ±‚æ‹¦æˆªå™¨",-1),d=(0,p.Uk)(" å’Œ "),h=(0,p._)("strong",null,"å“åº”æ‹¦æˆªå™¨",-1),g=(0,p.Uk)(" ä¸¤ç§ã€‚"),U=(0,p.uE)('<p>åœ¨ä¸€ä¸ª Axios å®ä¾‹ä¸­é…ç½®äº†ä¸¤ç§æ‹¦æˆªå™¨åï¼Œä½¿ç”¨è¯¥å®ä¾‹å‘èµ·çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šå…ˆç»è¿‡è¯·æ±‚æ‹¦æˆªå™¨çš„å¤„ç†ï¼Œç„¶åå‘å‡ºè¯·æ±‚ã€‚è¿”å›çš„å“åº”ä¹Ÿä¼šå…ˆç»è¿‡å“åº”æ‹¦æˆªå™¨çš„å¤„ç†ï¼Œå†è¿”å›åˆ°å…·ä½“çš„è¯·æ±‚å“åº”é€»è¾‘ä¸­ã€‚</p><p>ä»¥ä¸Šçš„è®¸å¤šå…¬å…±çš„å¤„ç†é€»è¾‘æˆ‘ä»¬å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­ä¸€ä¸€å®ç°ï¼Œè¿™æ ·å®é™…å¼€å‘ä¸­å°±æ— éœ€åœ¨è€ƒè™‘äº†ã€‚</p><div class="custom-container tip"><p class="custom-container-title">å‹æƒ…æç¤º</p><p>å¦‚æœæœåŠ¡ç«¯å­˜åœ¨å¤šä¸ªåŸŸï¼Œè€Œä¸”å¤„ç†é€»è¾‘ä¹Ÿæœ‰å·®å¼‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <strong>å·¥å‚æ¨¡å¼</strong> æ¥åˆ›å»ºå¤šä¸ªä¸åŒé…ç½®çš„Axioså®ä¾‹ã€‚å½“ç„¶ï¼Œå…¶ä¸­çš„å…¬å…±å¤„ç†é€»è¾‘å¯ä»¥æŠ½è±¡æˆå…¬å…±å‡½æ•°å¤ç”¨ã€‚</p></div><p>å®Œæ•´çš„ä¸šåŠ¡å°è£…å¯ä»¥æŸ¥çœ‹<a href="#%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81">æ–‡æœ«ç¤ºä¾‹</a>ã€‚</p><h2 id="å¦‚ä½•å–æ¶ˆè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å–æ¶ˆè¯·æ±‚" aria-hidden="true">#</a> å¦‚ä½•å–æ¶ˆè¯·æ±‚</h2><p>å‘é€è¯·æ±‚åæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¸»åŠ¨çš„å–æ¶ˆè¯·æ±‚ï¼Ÿå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>',6),f=(0,p.Uk)("åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å‘èµ·è¯·æ±‚ä½¿ç”¨çš„æ˜¯ "),y={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest",target:"_blank",rel:"noopener noreferrer"},v=(0,p.Uk)("XMLHttpRequest"),x=(0,p.Uk)("è¿™ä¸ªåŸç”Ÿå¯¹è±¡ï¼Œå®ƒæä¾›äº† abort å‡½æ•°æ¥å–æ¶ˆè¯·æ±‚ã€‚"),E=(0,p._)("p",null,[(0,p.Uk)("Axiosåœ¨æ­¤åŸºç¡€ä¸Šåšäº†å°è£…ï¼Œå†…éƒ¨æä¾›äº† "),(0,p._)("code",null,"CancelToken"),(0,p.Uk)(" è¿™ä¸ª APIã€‚")],-1),w=(0,p._)("code",null,"CancelToken",-1),A=(0,p.Uk)(" æœ¬è´¨ä¸Šä¹Ÿæ˜¯åœ¨å†…éƒ¨è°ƒç”¨äº† abort å‡½æ•° æ¥å–æ¶ˆå½“å‰çš„è¯·æ±‚ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»æŸ¥çœ‹"),T={href:"https://github.com/axios/axios/blob/master/lib/cancel/CancelToken.js",target:"_blank",rel:"noopener noreferrer"},R=(0,p.Uk)("æºç "),j=(0,p._)("p",null,[(0,p.Uk)("ä½¿ç”¨æ–¹å¼ä¹Ÿæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ "),(0,p._)("code",null,"CancelToken.source"),(0,p.Uk)(" å·¥å‚å‡½æ•°ï¼Œä¸€ç§æ˜¯å®ä¾‹åŒ–æ˜¯ä¼ å…¥cancelå‡½æ•°ã€‚")],-1),q=(0,p._)("p",null,"å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼›",-1),C=(0,p._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,p._)("pre",{class:"language-javascript"},[(0,p._)("code",null,[(0,p._)("span",{class:"token keyword"},"const"),(0,p.Uk)(" xhr "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(),(0,p._)("span",{class:"token keyword"},"new"),(0,p.Uk)(),(0,p._)("span",{class:"token class-name"},"XMLHttpRequest"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\nxhr"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"open"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'GET'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token string"},"'https://some-domain/api/user?id=123'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token boolean"},"true"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\nxhr"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"send"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\n"),(0,p._)("span",{class:"token comment"},"// å–æ¶ˆè¯·æ±‚"),(0,p.Uk)("\nxhr"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"abort"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n")])]),(0,p._)("div",{class:"line-numbers"},[(0,p._)("span",{class:"line-number"},"1"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"2"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"3"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"4"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"5"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"6"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"7"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"8"),(0,p._)("br")])],-1),Q=(0,p._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,p._)("pre",{class:"language-javascript"},[(0,p._)("code",null,[(0,p._)("span",{class:"token keyword"},"const"),(0,p.Uk)(" CancelToken "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(" axios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p.Uk)("CancelToken"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\n"),(0,p._)("span",{class:"token keyword"},"const"),(0,p.Uk)(" source "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(" CancelToken"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"source"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\naxios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"get"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user?id=123'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// æ·»åŠ cancelToken"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token literal-property property"},"cancelToken"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(" source"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"token"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\naxios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"post"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)(),(0,p._)("span",{class:"token literal-property property"},"id"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(),(0,p._)("span",{class:"token number"},"123"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// æ·»åŠ cancelToken"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token literal-property property"},"cancelToken"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(" source"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"token"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\n"),(0,p._)("span",{class:"token comment"},"// æ­¤å¤„è°ƒç”¨cancelå‡½æ•° å–æ¶ˆè¯·æ±‚"),(0,p.Uk)("\nsource"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"cancel"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'cancel request'"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n")])]),(0,p._)("div",{class:"line-numbers"},[(0,p._)("span",{class:"line-number"},"1"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"2"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"3"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"4"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"5"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"6"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"7"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"8"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"9"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"10"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"11"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"12"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"13"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"14"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"15"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"16"),(0,p._)("br")])],-1),P=(0,p._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,p._)("pre",{class:"language-javascript"},[(0,p._)("code",null,[(0,p._)("span",{class:"token keyword"},"const"),(0,p.Uk)(" CancelToken "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(" axios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p.Uk)("CancelToken"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\n"),(0,p._)("span",{class:"token keyword"},"let"),(0,p.Uk)(" cancelFunction"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\naxios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"get"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user?id=123'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// æ·»åŠ cancelToken"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token literal-property property"},"cancelToken"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(),(0,p._)("span",{class:"token keyword"},"new"),(0,p.Uk)(),(0,p._)("span",{class:"token class-name"},"CancelToken"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token keyword"},"function"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"c"),(0,p._)("span",{class:"token punctuation"},")"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n    "),(0,p._)("span",{class:"token comment"},"// è®°å½•cancelå‡½æ•°"),(0,p.Uk)("\n    cancelFunction "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(" c"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\naxios"),(0,p._)("span",{class:"token punctuation"},"."),(0,p._)("span",{class:"token function"},"post"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token string"},"'/user'"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)(),(0,p._)("span",{class:"token literal-property property"},"id"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(),(0,p._)("span",{class:"token number"},"123"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token comment"},"// æ·»åŠ cancelToken"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token literal-property property"},"cancelToken"),(0,p._)("span",{class:"token operator"},":"),(0,p.Uk)(),(0,p._)("span",{class:"token keyword"},"new"),(0,p.Uk)(),(0,p._)("span",{class:"token class-name"},"CancelToken"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token keyword"},"function"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token parameter"},"c"),(0,p._)("span",{class:"token punctuation"},")"),(0,p.Uk)(),(0,p._)("span",{class:"token punctuation"},"{"),(0,p.Uk)("\n    "),(0,p._)("span",{class:"token comment"},"// è®°å½•cancelå‡½æ•°"),(0,p.Uk)("\n    cancelFunction "),(0,p._)("span",{class:"token operator"},"="),(0,p.Uk)(" c"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n  "),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},","),(0,p.Uk)("\n"),(0,p._)("span",{class:"token punctuation"},"}"),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n\n"),(0,p._)("span",{class:"token comment"},"// æ­¤å¤„è°ƒç”¨cancelå‡½æ•° å–æ¶ˆè¯·æ±‚"),(0,p.Uk)("\n"),(0,p._)("span",{class:"token function"},"cancelFunction"),(0,p._)("span",{class:"token punctuation"},"("),(0,p._)("span",{class:"token punctuation"},")"),(0,p._)("span",{class:"token punctuation"},";"),(0,p.Uk)("\n")])]),(0,p._)("div",{class:"line-numbers"},[(0,p._)("span",{class:"line-number"},"1"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"2"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"3"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"4"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"5"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"6"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"7"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"8"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"9"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"10"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"11"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"12"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"13"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"14"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"15"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"16"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"17"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"18"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"19"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"20"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"21"),(0,p._)("br"),(0,p._)("span",{class:"line-number"},"22"),(0,p._)("br")])],-1),B=(0,p.uE)('<h2 id="ä¸šåŠ¡åŒ–å°è£…" tabindex="-1"><a class="header-anchor" href="#ä¸šåŠ¡åŒ–å°è£…" aria-hidden="true">#</a> ä¸šåŠ¡åŒ–å°è£…</h2><h3 id="æµç¨‹æ¢³ç†" tabindex="-1"><a class="header-anchor" href="#æµç¨‹æ¢³ç†" aria-hidden="true">#</a> æµç¨‹æ¢³ç†</h3><p>ä¸Šä¸€èŠ‚äº†è§£åˆ°äº†ä½¿ç”¨ Axios å¦‚ä½•å–æ¶ˆè¯·æ±‚ï¼Œå½“ç„¶ï¼Œä¸æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½è¦è¢«å–æ¶ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å“ªäº›è¯·æ±‚éœ€è¦è¢«å–æ¶ˆã€‚</p><p>å¯¹åº”æœ¬æ–‡å¼€å¤´çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ï¼šä¸€ä¸ªè¯·æ±‚åœ¨åŒä¸€é¡µé¢ä¸­å¦‚æœ<strong>é‡å¤å‡ºç°äº†å¤šæ¬¡</strong>ï¼Œå°±ç®—é‡å¤è¯·æ±‚äº†ã€‚å¯¹äºè¿™äº›é‡å¤è¯·æ±‚æˆ‘ä»¬éœ€è¦æ‰§è¡Œå–æ¶ˆé€»è¾‘ã€‚</p><p>é‡å¤å‡ºç°çš„æ¥å£æœ‰ä»€ä¹ˆç‰¹å¾å‘¢ï¼Ÿ</p><ul><li><p>ç›¸åŒçš„è¯·æ±‚URL</p></li><li><p>ç›¸åŒçš„è¯·æ±‚æ–¹å¼</p></li><li><p>ç›¸åŒçš„è¯·æ±‚å‚æ•°</p></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>æ³¨æ„ï¼šä¸åŒçš„è¯·æ±‚å‚æ•°æœ‰æ—¶ä¹Ÿç®—æ˜¯é‡å¤è¯·æ±‚ã€‚ä¾‹å¦‚ï¼š<a href="#%E5%8F%AF%E8%83%BD%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF">åœºæ™¯ä¸€</a>ã€‚</p></div><p>åˆ†æå®Œæ¯•ï¼Œæˆ‘ä»¬é‡æ–°æ¢³ç†ä¸€ä¸‹æµç¨‹ï¼š</p><ol><li><p>å‘èµ·è¯·æ±‚A1ã€‚</p></li><li><p>å‘èµ·è¯·æ±‚A2ï¼Œæ­¤æ—¶<strong>è¯·æ±‚A1è¿˜æœªå®Œæˆ</strong>ï¼Œå‘½ä¸­å–æ¶ˆé€»è¾‘ã€‚</p></li><li><p>æ‰§è¡Œå–æ¶ˆé€»è¾‘ï¼Œ<strong>å–æ¶ˆè¯·æ±‚A1</strong>ï¼Œå®Œæˆå–æ¶ˆæ“ä½œã€‚</p></li><li><p>è¯·æ±‚A2æ­£å¸¸å“åº”ã€‚</p></li></ol><p>é’ˆå¯¹ä¸Šè¿°æµç¨‹ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å‘é€ A2 æ—¶ï¼ŒçŸ¥æ™“ A1 æ­¤æ—¶çš„çŠ¶æ€ï¼Œå½“ç„¶ï¼Œä¹Ÿéœ€è¦çŸ¥é“ A1 å’Œ A2 æ˜¯å¦ç®—æ˜¯é‡å¤è¯·æ±‚ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>è¯·æ±‚é˜Ÿåˆ—</strong>æ¥è®°å½•å½“å‰æœªå®Œæˆçš„è¯·æ±‚ï¼Œéœ€è¦åˆ¶å®šä¸€ä¸ªè§„åˆ™æ¥æ ‡è¯†é‡å¤å‡½æ•°ã€‚</p><h3 id="è¯·æ±‚æ ‡è¯†" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚æ ‡è¯†" aria-hidden="true">#</a> è¯·æ±‚æ ‡è¯†</h3><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç›¸åŒçš„URLã€ç›¸åŒçš„è¯·æ±‚æ–¹å¼ã€ç›¸åŒçš„å‚æ•°ï¼Œç®—åšé‡å¤è¯·æ±‚ã€‚</p><p>æœ‰äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œç›¸åŒçš„URLã€ç›¸åŒçš„è¯·æ±‚æ–¹å¼ã€ä¸åŒçš„è¯·æ±‚å‚æ•°ï¼Œä¹Ÿåº”è¯¥ç®—ä½œé‡å¤è¯·æ±‚ã€‚</p><p>å› æ­¤ï¼Œå¤„ç†çš„æ—¶å€™è¦å¯¹è¯·æ±‚å‚æ•°åšå…¼å¹¶å¤„ç†ã€‚</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><code>__REQUEST_KEY__</code> ä¼ å…¥è¯¥å­—æ®µæ¥ä»£æ›¿é»˜è®¤ç”Ÿæˆçš„è¯·æ±‚æ ‡è¯†</p><p><code>__IGNORE_PARAMS__</code> ä¼ å…¥è¯¥å­—æ®µä»£è¡¨å½“å‰è¯·æ±‚å¿½ç•¥å‚æ•°åˆ¤æ–­é‡å¤ã€‚</p><p>è¿™ä¸¤ä¸ªå­—æ®µå¼€æ”¾ç»™<strong>å®é™…å¼€å‘è€…</strong>ï¼Œæ¥å±€éƒ¨è°ƒæ•´å†…éƒ¨çš„å–æ¶ˆé€»è¾‘ã€‚ <a href="#%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81">ä½¿ç”¨ç¤ºä¾‹</a></p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">generateRequestKey</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span>\n    url<span class="token punctuation">,</span>\n    method<span class="token punctuation">,</span>\n    params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token comment">// è¯¥å­—æ®µå¦‚æœç”¨æˆ·ä¼ å…¥ï¼Œä»£è¡¨ä½¿ç”¨è¯¥å­—æ®µä½œä¸ºè¯·æ±‚çš„keyï¼Œè€Œæ— éœ€æŒ‰ç…§é€šç”¨é€»è¾‘ç”Ÿæˆ</span>\n    __REQUEST_KEY__ <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n    __IGNORE_PARAMS__ <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>__REQUEST_KEY__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> __REQUEST_KEY__<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å¦‚æœå¿½ç•¥å‚æ•°ï¼Œåˆ™ä¸å°†å‚æ•°ç®—å…¥è¯·æ±‚æ ‡è¯†ä¸­</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>__IGNORE_PARAMS__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&amp;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token comment">// å¦‚æœä¸å¿½ç•¥å‚æ•°ï¼Œåˆ™å‚æ•°ä»ç®—å…¥è¯·æ±‚æ ‡è¯†ä¸­</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&amp;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="è¯·æ±‚é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚é˜Ÿåˆ—" aria-hidden="true">#</a> è¯·æ±‚é˜Ÿåˆ—</h3><p>æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªè¯·æ±‚é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªå°†è¦å‘å‡ºçš„è¯·æ±‚é¦–å…ˆè¿›å…¥è¯·æ±‚é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªå®Œæˆçš„è¯·æ±‚é€€å‡ºè¯·æ±‚é˜Ÿåˆ—ã€‚</p><p>åŒæ—¶é˜Ÿåˆ—ä¸­çš„è¯·æ±‚å­˜æœ‰è¯·æ±‚æ ‡è¯†ä»¥åŠå–æ¶ˆå‡½æ•°ï¼Œä¾¿äºè¿›è¡Œé‡å¤åˆ¤å®šå’Œæ‰§è¡Œå–æ¶ˆæ“ä½œã€‚</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>æ­¤å¤„æˆ‘ä»¬é‡‡ç”¨ Axioså–æ¶ˆè¯·æ±‚çš„<a href="#%E5%A6%82%E4%BD%95%E5%8F%96%E6%B6%88%E8%AF%B7%E6%B1%82">æ–¹å¼äºŒ</a>ï¼Œå­˜å‚¨ cancel å‡½æ•°æ–¹ä¾¿è‡ªè¡Œå–æ¶ˆç‰¹å®šè¯·æ±‚ã€‚</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\n<span class="token doc-comment comment">/**\n * <span class="token punctuation">{</span> key: string, cancel: Function <span class="token punctuation">}</span>\n */</span>\n<span class="token keyword">const</span> requestQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n\n<span class="token comment">// å…¥é˜Ÿåˆ—å‡½æ•°</span>\n<span class="token keyword">const</span> <span class="token function-variable function">addRequestQueue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> requestKey <span class="token operator">=</span> <span class="token function">generateRequestKey</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  config<span class="token punctuation">.</span>cancelToken <span class="token operator">=</span> config<span class="token punctuation">.</span>cancelToken <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    requestQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token literal-property property">key</span><span class="token operator">:</span> requestKey<span class="token punctuation">,</span>\n      <span class="token literal-property property">cancel</span><span class="token operator">:</span> c<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// å‡ºé˜Ÿåˆ—å‡½æ•°</span>\n<span class="token keyword">const</span> <span class="token function-variable function">removeRequestQueue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> requestKey <span class="token operator">=</span> <span class="token function">generateRequestKey</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> requestQueue<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>requestQueue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">===</span> requestKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      requestQueue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      requestQueue<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">break</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­" tabindex="-1"><a class="header-anchor" href="#åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­" aria-hidden="true">#</a> åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­</h3><p>å°†ä»¥ä¸Šçš„å‡ ä¸ªå·¥å…·å‡½æ•°åŠ å…¥åˆ°æ‹¦æˆªå™¨ä¸­ã€‚</p><p>ğŸ˜‹ è¿™æ ·ï¼Œä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„Axioså°è£…å°±å®Œæˆäº†ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token punctuation">{</span> generateRequestKey<span class="token punctuation">,</span> addRequestQueue<span class="token punctuation">,</span> removeRequestQueue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./uitls&#39;</span><span class="token punctuation">;</span>\n\n<span class="token comment">// åˆ›å»ºä¸€ä¸ªaxioså®ä¾‹</span>\n<span class="token keyword">const</span> axiosInstance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// åœ¨æ­¤å¤„è®¾ç½®baseURLï¼Œè¿™æ ·å‘èµ·è¯·æ±‚æ—¶æ— éœ€è¡¥é½hostï¼Œç›´æ¥ /api/xxx å³å¯ ã€‚</span>\n  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&#39;https://some-domain.com/api&#39;</span><span class="token punctuation">,</span>\n  <span class="token comment">// è®¾ç½®ä¸ºtrueåï¼Œaxioså‘é€è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨æºå¸¦Cookie</span>\n  <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token comment">// è®¾ç½®æ¥å£è¶…æ—¶æ—¶é—´ã€‚</span>\n  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å¯ä»¥åœ¨æ­¤å¤„å­˜æ”¾ç™»å½•åè·å–åˆ°çš„tokenä¿¡æ¯ã€‚</span>\n    <span class="token string-property property">&#39;X-Token&#39;</span><span class="token operator">:</span> <span class="token string">&#39;xxxxxx&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// é…ç½®è¯·æ±‚æ‹¦æˆªå™¨</span>\naxiosInstance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// æ‰§è¡Œé‡å¤åˆ¤æ–­é€»è¾‘å–æ¶ˆè¯·æ±‚</span>\n  <span class="token function">removeRequestQueue</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// å°†å½“å‰è¯·æ±‚æ¨å…¥è¯·æ±‚é˜Ÿåˆ—</span>\n  <span class="token function">addRequestQueue</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> config<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// é…ç½®å“åº”æ‹¦æˆªå™¨</span>\naxiosInstance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> config<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">;</span>\n\n  <span class="token comment">// å°†å·²å®Œæˆçš„è¯·æ±‚é€€å‡ºè¯·æ±‚é˜Ÿåˆ—</span>\n  <span class="token function">removeRequestQueue</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token doc-comment comment">/**\n   * å¯ä»¥åŒæœåŠ¡ç«¯çº¦å®šå¼‚å¸¸çŠ¶æ€ç ï¼Œåœ¨æ­¤å¤„ç»Ÿä¸€å¤„ç†æ¥å£è¿”å›çš„å¼‚å¸¸ä¿¡æ¯ã€‚\n   */</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åœ¨æœªç™»å½•æ—¶è·³åˆ°ç™»å½•é¡µ</span>\n      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;https://login-page.com&#39;</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> data<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> config <span class="token punctuation">}</span> <span class="token operator">=</span> error<span class="token punctuation">;</span>\n  <span class="token comment">// å°†å·²å®Œæˆçš„è¯·æ±‚é€€å‡ºè¯·æ±‚é˜Ÿåˆ—</span>\n  <span class="token function">removeRequestQueue</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å¤„ç†éå–æ¶ˆå¯¼è‡´çš„æ¥å£å¼‚å¸¸æƒ…å†µ</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">return</span> axiosInstance<span class="token punctuation">;</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="å®é™…ä½¿ç”¨ä»£ç " tabindex="-1"><a class="header-anchor" href="#å®é™…ä½¿ç”¨ä»£ç " aria-hidden="true">#</a> å®é™…ä½¿ç”¨ä»£ç </h3><p>å®é™…çš„ä¸šåŠ¡ä»£ç ä¸­å¯èƒ½ä¼šåƒä¸‹é¢çš„æ–¹å¼ä½¿ç”¨ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;./axiosInstance.js&#39;</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * GETè¯·æ±‚\n */</span>\n\n<span class="token comment">// å¿½ç•¥å‚æ•°åˆ¤æ–­ï¼Œ URLå’Œè¯·æ±‚æ–¹å¼é‡å¤å³è¯·æ±‚é‡å¤</span>\naxios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">__IGNORE_PARAMS__</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// è‡ªè¡Œä¼ å…¥requestKey</span>\naxios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">__REQUEST_KEY__</span><span class="token operator">:</span> <span class="token string">&#39;getUser&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * POSTè¯·æ±‚\n */</span>\n\n<span class="token comment">// å¿½ç•¥å‚æ•°åˆ¤æ–­ï¼Œ URLå’Œè¯·æ±‚æ–¹å¼é‡å¤å³è¯·æ±‚é‡å¤</span>\naxios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">__IGNORE_PARAMS__</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// è‡ªè¡Œä¼ å…¥requestKey</span>\naxios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">__REQUEST_KEY__</span><span class="token operator">:</span> <span class="token string">&#39;postUser&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><div class="highlight-line">Â </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="æŠ€èƒ½ç‚¹æŒæ¡" tabindex="-1"><a class="header-anchor" href="#æŠ€èƒ½ç‚¹æŒæ¡" aria-hidden="true">#</a> æŠ€èƒ½ç‚¹æŒæ¡</h2>',30),S={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest",target:"_blank",rel:"noopener noreferrer"},I=(0,p.Uk)("XMLHttpRequest"),W={href:"https://axios-http.com",target:"_blank",rel:"noopener noreferrer"},K=(0,p.Uk)("Axios å®˜ç½‘"),F={href:"https://github.com/axios/axios",target:"_blank",rel:"noopener noreferrer"},L=(0,p.Uk)("Axios æºç "),O={},G=(0,a(3744).Z)(O,[["render",function(n,s){const a=(0,p.up)("OutboundLink"),O=(0,p.up)("CodeGroupItem"),G=(0,p.up)("CodeGroup");return(0,p.wg)(),(0,p.iD)(p.HY,null,[t,(0,p._)("p",null,[(0,p._)("a",e,[o,(0,p.Wm)(a)]),c]),(0,p.Wm)(G,null,{default:(0,p.w5)((()=>[(0,p.Wm)(O,{title:"GET",active:""},{default:(0,p.w5)((()=>[l])),_:1}),(0,p.Wm)(O,{title:"POST"},{default:(0,p.w5)((()=>[u])),_:1})])),_:1}),r,(0,p._)("p",null,[i,(0,p._)("a",k,[b,(0,p.Wm)(a)]),_,m,d,h,g]),U,(0,p._)("p",null,[f,(0,p._)("a",y,[v,(0,p.Wm)(a)]),x]),E,(0,p._)("p",null,[w,A,(0,p._)("a",T,[R,(0,p.Wm)(a)])]),j,q,(0,p.Wm)(G,null,{default:(0,p.w5)((()=>[(0,p.Wm)(O,{title:"æµè§ˆå™¨"},{default:(0,p.w5)((()=>[C])),_:1}),(0,p.Wm)(O,{title:"Axios æ–¹å¼ä¸€",active:""},{default:(0,p.w5)((()=>[Q])),_:1}),(0,p.Wm)(O,{title:"Axios æ–¹å¼äºŒ",active:""},{default:(0,p.w5)((()=>[P])),_:1})])),_:1}),B,(0,p._)("ul",null,[(0,p._)("li",null,[(0,p._)("p",null,[(0,p._)("a",S,[I,(0,p.Wm)(a)])])]),(0,p._)("li",null,[(0,p._)("p",null,[(0,p._)("a",W,[K,(0,p.Wm)(a)])])]),(0,p._)("li",null,[(0,p._)("p",null,[(0,p._)("a",F,[L,(0,p.Wm)(a)])])])])],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);